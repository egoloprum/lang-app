{% extends 'main.html' %}

{% block content %}

<section class="m-3">
  <div class="m-3" style="display: flex;">
      <!-- followers list -->
    <div class="p-3 white-border me-2" style="width: 100%;">
      <p class="mb-2">Followers list</p>
      <table class="table table-bordered">
        <thead class="small-font-size">
          <tr>
            <th>#</th>
            <th>Username</th>
            {% if request.user == curr_user %}
            <th>Unfollow</th>
            {% endif %}
          </tr>
        </thead>
        <tbody class="small-font-size">
          {% for follower in follow_list %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ follower.user }}</td>
            {% if request.user == curr_user %}
            <td><a href="{% url 'decline-follow' follower.id %}" class="btn btn-outline-danger">Unfollow</a></td>
            {% endif %}
          </tr>
          {% empty %}
            <tr>
              <td>0</td>
              <td>No followers</td>
              <td></td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <!-- request recieved -->
    <div class="p-3 white-border me-2 ms-2" style="width: 100%;">
      <p class="mb-2">Request recieved</p>
      <table class="table table-bordered">
        <thead class="small-font-size">
          <tr>
            <th>#</th>
            <th>Username</th>
            <th>Time</th>
            <th>Accept</th>
            <th>Cancel</th>
          </tr>
        </thead>
        <tbody class="small-font-size">
          {% if follow_requests.exists and request.user == curr_user %}
            {% for request in follow_requests %}
            <tr>
              <td>{{ forloop.counter }}</td>
              <td>{{ request.sender.username }}</td>
              <td>{{ request.timestamp }}</td>
              <td><a href="{% url 'accept-follow-request' request.id %}">Accept</a></td>
              <td><a hx-boost="true" href="{% url 'cancel-request' request.id %}">Cancel</a>
              </td>
            </tr>
            {% endfor %}
          {% endif %}
        </tbody>
      </table>
    </div>

    <!-- request sent -->
    <div class="p-3 white-border ms-2" style="width: 100%;">
      <p class="mb-2">Requests sent</p>
      <table class="table table-bordered">
        <thead class="small-font-size">
          <tr>
            <th>#</th>
            <th>Username</th>
            <th>Time</th>
            <th>Cancel</th>
          </tr>
        </thead>
        <tbody class="small-font-size">
          {% if follow_requests_sent.exists and request.user == curr_user %}
          {% for request in follow_requests_sent %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ request.reciever.user }}</td>
            <td>{{ request.timestamp }}</td>
            <td><a hx-boost="true" href="{% url 'cancel-request' request.id %}">Cancel</a>
            </td>
          </tr>
          {% empty %}
            <tr>
              <td>0</td>
              <td>No followers</td>
            </tr>
          {% endfor %}
          {% endif %}
        </tbody>
      </table>
    </div>
  </div>
</section>

{% endblock %}
